{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/markhong/creative-project-520521/app/login/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport supabase from '@/lib/supabaseBrowserClient'\n\nexport default function LoginPage() {\n  const router = useRouter()\n\n  const [step, setStep] = useState<'email' | 'login' | 'signup'>('email')\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [message, setMessage] = useState('')\n\n  const resetForm = () => {\n    setPassword('')\n    setConfirmPassword('')\n    setEmail('')\n  }\n\n  const handleEmailSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setMessage('Checking for account...')\n  \n    const { data: sessionData } = await supabase.auth.getSession()\n    if (sessionData.session) {\n      setMessage('‚úÖ Already logged in. Redirecting...')\n      router.replace('/')\n      return\n    }\n  \n    \n    const { error } = await supabase.auth.signUp({\n      email,\n      password: 'placeholder123',\n    })\n  \n    if (error?.message?.includes('User already registered')) {\n      setStep('login')\n      setMessage('‚úÖ Account found. Please enter your password.')\n    } else if (!error) {\n      // User doesn't exist, send them a magic link to set password\n      const { error: otpError } = await supabase.auth.signInWithOtp({\n        email,\n        options: {\n          emailRedirectTo: 'http://localhost:3000/login/set-password',\n        },\n      })\n  \n      if (otpError) {\n        setMessage('‚ùå Error: ' + otpError.message)\n      } else {\n        setMessage('‚úÖ Check your email to confirm and set your password.')\n        setStep('email')\n      }\n  \n      // üîê clear any temp session created from the signUp probe\n      await supabase.auth.signOut()\n    } else {\n      setMessage('‚ùå Unknown error: ' + error.message)\n    }\n  }\n  \n  \n\n  return (\n    <div className=\"p-4 max-w-md mx-auto\">\n      <h1 className=\"text-2xl font-bold mb-4 text-center\">Log In or Sign Up</h1>\n\n      {step === 'email' && (\n        <form onSubmit={handleEmailSubmit} className=\"space-y-4\">\n          <input\n            className=\"border border-gray-300 rounded px-3 py-2 w-full\"\n            type=\"email\"\n            placeholder=\"Enter your WashU email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n          <button\n            className=\"bg-black text-white px-4 py-2 rounded w-full\"\n            type=\"submit\"\n          >\n            Continue\n          </button>\n        </form>\n      )}\n\n      {step === 'login' && (\n  <form\n    onSubmit={async (e) => {\n      e.preventDefault()\n      const { error } = await supabase.auth.signInWithPassword({ email, password })\n      if (error) {\n        setMessage('‚ùå Login failed: ' + error.message)\n      } else {\n        setMessage('‚úÖ Logged in! Redirecting...')\n        router.replace('/')\n      }\n    }}\n    className=\"space-y-4\"\n  >\n    <input\n      className=\"border border-gray-300 rounded px-3 py-2 w-full\"\n      type=\"password\"\n      placeholder=\"Enter your password\"\n      value={password}\n      onChange={(e) => setPassword(e.target.value)}\n      required\n    />\n    <button\n      className=\"bg-black text-white px-4 py-2 rounded w-full\"\n      type=\"submit\"\n    >\n      Log In\n    </button>\n  </form>\n)}\n\n      {message && <p className=\"mt-4 text-sm text-gray-700 text-center\">{message}</p>}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgC;IAC/D,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,YAAY;QAChB,YAAY;QACZ,mBAAmB;QACnB,SAAS;IACX;IAEA,MAAM,oBAAoB,OAAO;QAC/B,EAAE,cAAc;QAChB,WAAW;QAEX,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,UAAU;QAC5D,IAAI,YAAY,OAAO,EAAE;YACvB,WAAW;YACX,OAAO,OAAO,CAAC;YACf;QACF;QAGA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3C;YACA,UAAU;QACZ;QAEA,IAAI,OAAO,SAAS,SAAS,4BAA4B;YACvD,QAAQ;YACR,WAAW;QACb,OAAO,IAAI,CAAC,OAAO;YACjB,6DAA6D;YAC7D,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;gBAC5D;gBACA,SAAS;oBACP,iBAAiB;gBACnB;YACF;YAEA,IAAI,UAAU;gBACZ,WAAW,cAAc,SAAS,OAAO;YAC3C,OAAO;gBACL,WAAW;gBACX,QAAQ;YACV;YAEA,0DAA0D;YAC1D,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,OAAO;QAC7B,OAAO;YACL,WAAW,sBAAsB,MAAM,OAAO;QAChD;IACF;IAIA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAsC;;;;;;YAEnD,SAAS,yBACR,8OAAC;gBAAK,UAAU;gBAAmB,WAAU;;kCAC3C,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,QAAQ;;;;;;kCAEV,8OAAC;wBACC,WAAU;wBACV,MAAK;kCACN;;;;;;;;;;;;YAMJ,SAAS,yBACd,8OAAC;gBACC,UAAU,OAAO;oBACf,EAAE,cAAc;oBAChB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;wBAAE;wBAAO;oBAAS;oBAC3E,IAAI,OAAO;wBACT,WAAW,qBAAqB,MAAM,OAAO;oBAC/C,OAAO;wBACL,WAAW;wBACX,OAAO,OAAO,CAAC;oBACjB;gBACF;gBACA,WAAU;;kCAEV,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,QAAQ;;;;;;kCAEV,8OAAC;wBACC,WAAU;wBACV,MAAK;kCACN;;;;;;;;;;;;YAME,yBAAW,8OAAC;gBAAE,WAAU;0BAA0C;;;;;;;;;;;;AAGzE","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/markhong/creative-project-520521/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}}]
}