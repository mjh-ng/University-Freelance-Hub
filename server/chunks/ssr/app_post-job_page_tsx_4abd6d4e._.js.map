{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/markhong/creative-project-520521/app/post-job/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport supabase from '@/lib/supabaseBrowserClient'\n\nexport default function PostJobPage() {\n  const router = useRouter()\n\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [isPaid, setIsPaid] = useState(false)\n  const [posterEmail, setPosterEmail] = useState('')\n  const [message, setMessage] = useState('')\n  const [loading, setLoading] = useState(false)\n\n  // Fetch logged-in user’s email\n  useEffect(() => {\n    const getUser = async () => {\n      const { data, error } = await supabase.auth.getUser()\n      if (error || !data.user) {\n        router.replace('/login') // not logged in\n      } else {\n        setPosterEmail(data.user.email!)\n      }\n    }\n\n    getUser()\n  }, [router])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setMessage('Posting your job...')\n\n    const { error } = await supabase.from('jobs').insert([\n      {\n        title,\n        description,\n        is_paid: isPaid,\n        poster_email: posterEmail,\n      },\n    ])\n\n    if (error) {\n      setMessage('❌ Failed to post job: ' + error.message)\n    } else {\n      setMessage('✅ Job posted! Redirecting...')\n      setTimeout(() => router.replace('/'), 1000)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <div className=\"p-6 max-w-xl mx-auto text-center\">\n      <h1 className=\"text-2xl font-bold mb-6\">Post a Job</h1>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4 text-left\">\n        <input\n          type=\"text\"\n          placeholder=\"Job title\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          required\n          className=\"w-full border px-3 py-2 rounded\"\n        />\n        <textarea\n          placeholder=\"Job description\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          className=\"w-full border px-3 py-2 rounded\"\n          rows={4}\n        />\n        <label className=\"flex items-center space-x-2\">\n          <input\n            type=\"checkbox\"\n            checked={isPaid}\n            onChange={() => setIsPaid(!isPaid)}\n          />\n          <span>This is a paid job</span>\n        </label>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"bg-black text-white px-4 py-2 rounded w-full\"\n        >\n          {loading ? 'Posting...' : 'Post Job'}\n        </button>\n      </form>\n\n      {message && <p className=\"mt-4 text-sm text-gray-700 text-center\">{message}</p>}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,+BAA+B;IAC/B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,UAAU;YACd,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,OAAO;YACnD,IAAI,SAAS,CAAC,KAAK,IAAI,EAAE;gBACvB,OAAO,OAAO,CAAC,UAAU,gBAAgB;;YAC3C,OAAO;gBACL,eAAe,KAAK,IAAI,CAAC,KAAK;YAChC;QACF;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,WAAW;QAEX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC;YACnD;gBACE;gBACA;gBACA,SAAS;gBACT,cAAc;YAChB;SACD;QAED,IAAI,OAAO;YACT,WAAW,2BAA2B,MAAM,OAAO;QACrD,OAAO;YACL,WAAW;YACX,WAAW,IAAM,OAAO,OAAO,CAAC,MAAM;QACxC;QAEA,WAAW;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,QAAQ;wBACR,WAAU;;;;;;kCAEZ,8OAAC;wBACC,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;wBACV,MAAM;;;;;;kCAER,8OAAC;wBAAM,WAAU;;0CACf,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,IAAM,UAAU,CAAC;;;;;;0CAE7B,8OAAC;0CAAK;;;;;;;;;;;;kCAGR,8OAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,UAAU,eAAe;;;;;;;;;;;;YAI7B,yBAAW,8OAAC;gBAAE,WAAU;0BAA0C;;;;;;;;;;;;AAGzE","debugId":null}}]
}